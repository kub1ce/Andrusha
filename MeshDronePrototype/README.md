# Mesh Drone Prototype
Создание mesh-сети дронов, используя одну и ту же прошивку для плат и управление ими через UI

## Что делать
1. Билдим и загружаем прошивку на плату.
2. **ВАЖНО: ЗАПУСКАТЬ ПЛАТЫ НУЖНО <u>ПО ОЧЕРЕДИ</u>. ПРЕЖДЕ ЧЕМ ЗАПУСТИТЬ СЛЕДУЮЩУЮ, УБЕДИТЕСЬ, ЧТО НА ПРЕДЫДУЩЕЙ ГОРИТ СВЕТОДИОД**
3. Если..
   - первый дрон уже инециальзирован (уже есть "главная" плата, с которой общается пользователь/компьютер):
     - Плата создает новую точку доступа с названием «Dron-ID», где <kbd>ID</kbd> - уникальный номер платы в Mesh сети

    - Иаче:
      - Плата запускает точку доступа «**Drone-1**» **и становится "главным" дроном, который общается с компьютером**
4. В конце работы алгоритма светодиод будет гореть **Белым цветом, если плата работает в режиме "главного" дрона** или **Фиолетовым - если в режиме побочного**.
5. Подключаемся к WiFi `Drone-1`
6. Переходим по ссылке http://192.168.222.11/
7. Управляем дронами

## Как это работает
При запуске прогамма сканирует доступные WiFi сети. Проверяет, есть ли такая, которая имеет название «Drone-1». Если да, то подключается к ней и запрашивает ID, с которым создаёт свою точку доступа. Если нужной сети не будет, то плата сама станет "главным" дроном, запустит WiFi «Drone-1» и будет обрабатывать основные запросы и работу с пользователем. При поступлении команды с веба она обрабатывается (исполняется команда или деблируется на следующий) на каждом дроне по цепочке, пока не дойдёт до определённого (если указание конкретному дрону, то до него. Если команда всем - последнего в цепочке)

## Проблемы версии
- Не устойчива к отключению дрона от сети. Если один дрон выключится, а потом влючится обратно, то он получит новый ID, одако цепь уже будет нарушена, т.к. нет алгоритма действий при отсоеденении. Проще говоря, придётся подключать все дроны заново.
- Дроны не держат постоянное соединение в сети. При поступлении команды они подключаются к последующему дрону, выполняют эту команду и отключаются от WiFi. Из-за этого задержка в выполнении команд достигает 10 секунд на каждый дрон.
